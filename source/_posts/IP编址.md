---
title: IP编址
categories: 
- 网络
tags: 
- 已整理
---
网络层位于数据链路层与传输层之间。网络层中包含了许多协议，其中最为重要的协议就是IP协议。网络层提供了IP路由功能。理解IP路由除了要熟悉IP协议的工作机制之外，还必须理解IP编址以及如何合理地使用IP地址来设计网络

## IP编址

### IP报文结构

上层协议类型
以太网帧中的Type字段值为0x0800，表示该帧的网络层协议为IP协议

#### IP报文头部

20~60 Byte
Version 版本号：IPv4 IPv6
Header Length 头部长度：
DS Field：
Total Length 总长度：

Time to Live（TTL）
Protocol
Header check

Source IP Address
Destination IP Address

#### IP编址

网络位+主机位
主机位全为0（0）是网络地址
主机位全为1（255）是广播地址

### IP地址分类

A类 0+网络位8bit+主机位24bit 0.0.0.0-127.255.255.255
B类 10+网络位16bit+主机位24bit 128.0.0.0-191.255.255.255
C类 110+网络位8bit+主机位24bit 192.0.0.0-223.255.255.255
D类 1110组播地址 244.0.0.0-239.255.255.255
E类 1111保留地址 240.0.0.0-255.255.255.255

私有地址
10.0.0.0-10.255.255.255
172.16.0.0-172.31.255.255
192.168.0.0-192.168.255.255
特殊地址
127.0.0.0-127.255.255.255 测试用IP
0.0.0.0 
255.255.255.255 广播地址

子网掩码用于确定网络地址（网段），方法是利用子网掩码与IP地址位相与
A类255.0.0.0
B类255.255.0.0
C类255.255.255.0
主机数是2^n
可用主机数是2^n-2

### VLSM技术

变长子网掩码
24位（255.255.255.0）变长为25位（255.255.255.128）126台设备
24位（255.255.255.0）变长为23位（255.255.254.0）510台设备

无类域间路由
CIDR增强了网络可扩展性
通告路由10.24.0.0/22可以统一接受10.24.1.0/24的数据

### 网关作用

网关用来转发来自不同网段之间的数据包

IP包分片

